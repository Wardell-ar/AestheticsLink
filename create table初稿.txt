create TABLE HOSPITAL (
    HOS_ID VARCHAR2(20 BYTE) NOT NULL,
    DATE_OF_ESTABLISHMENT DATE NOT NULL,
    NAME VARCHAR2(100 BYTE) NOT NULL,
    QUALIFICATION VARCHAR2(100 BYTE) NOT NULL,
    ADDRESS VARCHAR2(200 BYTE)  NOT NULL,
    PHONE_NUMBER VARCHAR2(20 BYTE) NOT NULL,

    CONSTRAINT HOSPITAL_PK PRIMARY KEY (HOS_ID)
)

create TABLE DEPARTMENT (
    DEP_ID VARCHAR2(20 BYTE) NOT NULL,
    NAME VARCHAR2(100 BYTE) NOT NULL,

    CONSTRAINT DEP_PK PRIMARY KEY (DEP_ID)
)

create TABLE HOS_DEP (
    H_ID VARCHAR2(20 BYTE) NOT NULL,
    D_ID VARCHAR2(20 BYTE) NOT NULL,

    CONSTRAINT HOS_DEP_H_ID_FK_R FOREIGN KEY (H_ID)
        REFERENCES HOSPITAL (HOS_ID),
    CONSTRAINT HOS_DEP_D_ID_FK_R FOREIGN KEY (D_ID)
        REFERENCES DEPARTMENT (DEP_ID)
)

CREATE TABLE SERVER (
    SER_ID VARCHAR2(20 BYTE)  NOT NULL,
    JOINED_DATE DATE NOT NULL,
    NAME VARCHAR2(100 BYTE)  NOT NULL,
    PASSWORD VARCHAR2(20 BYTE) NOT NULL,
    POSITION VARCHAR2(100 BYTE) NOT NULL,
    PHONE_NUM VARCHAR2(20 BYTE) NOT NULL,
    SALARY NUMBER(*, 2) NOT NULL CHECK (SALARY >= 0),
    HOS_ID VARCHAR2(20 BYTE)  NOT NULL,
    DEP_ID VARCHAR2(20 BYTE)  NOT NULL,

    CONSTRAINT SERVER_PK PRIMARY KEY (SER_ID),
    CONSTRAINT SER_HOS_HOS_ID_FK FOREIGN KEY (HOS_ID)
        REFERENCES HOSPITAL (HOS_ID),
    CONSTRAINT SER_DEP_DEP_ID_FK FOREIGN KEY (DEP_ID)
        REFERENCES DEPARTMENT (DEP_ID)
)

create TABLE OPERATING_ROOM (
    ROOM_ID  VARCHAR2(20 BYTE)  NOT NULL,
    HOS_ID  VARCHAR2(20 BYTE)  NOT NULL,
    POSITION  VARCHAR2(50 BYTE)  NOT NULL,

    CONSTRAINT OPERATING_ROOM_PK PRIMARY KEY (ROOM_ID),
    CONSTRAINT OPERATING_ROOM_HOS_HOS_ID_FK FOREIGN KEY (HOS_ID)
        REFERENCES HOSPITAL (HOS_ID)
)

create TABLE OPERATE_TIME (
    TIME_ID  VARCHAR2(20 BYTE)  NOT NULL,
    DAY DATE NOT NULL,
    START_TIME TIMESTAMP(6) NOT NULL,
    END_TIME TIMESTAMP(6) NOT NULL,
    STATUS  VARCHAR2(20 BYTE)  NOT NULL,
    ROOM_ID  VARCHAR2(20 BYTE)  NOT NULL,

    CONSTRAINT OPERATE_TIME_PK PRIMARY KEY (TIME_ID),
    CONSTRAINT OPERATE_TIME_OPERATING_ROOM_ROOM_ID_FK FOREIGN KEY (ROOM_ID)
        REFERENCES OPERATING_ROOM (ROOM_ID)
)

create TABLE PROJECT (
    PROJ_ID VARCHAR2(20 BYTE)  NOT NULL,
    NAME VARCHAR2(100 BYTE)  NOT NULL,
    PRICE NUMBER(*,2) NOT NULL CHECK (PRICE >= 0),
    FOUND_DATA DATE NOT NULL,

    CONSTRAINT PROJECT_PK PRIMARY KEY (PROJ_ID)
)

create TABLE OPERATE (
    PROJ_ID VARCHAR2(20 BYTE)  NOT NULL,
    ROOM_ID VARCHAR2(20 BYTE)  NOT NULL,

    CONSTRAINT OPERATE_OPERATING_ROOM_ROOM_ID_FK_R FOREIGN KEY (ROOM_ID)
        REFERENCES OPERATING_ROOM (ROOM_ID),
    CONSTRAINT OPERATE_PROJECT_PROJ_ID_FK_R FOREIGN KEY (PROJ_ID)
        REFERENCES PROJECT (PROJ_ID)
)

create TABLE COUPON (
    COU_ID  VARCHAR2(20 BYTE)  NOT NULL,
    FRONT BLOB NOT NULL,
    BACK BLOB NOT NULL,
    FOUNDER VARCHAR2(20 BYTE)  NOT NULL,
    FOUND_DATE DATE NOT NULL,
    NAME VARCHAR2(100 BYTE)  NOT NULL,
    TYPE VARCHAR2(50 BYTE)  NOT NULL,
    VALIDITY DATE NOT NULL,
    PRICE NUMBER(*,2) NOT NULL CHECK(PRICE>=0),
    STATUS VARCHAR2(20 BYTE) NOT NULL,

    CONSTRAINT COUPON_PK PRIMARY KEY (COU_ID)
)

create TABLE MEMBER (
    VIPLEVEL VARCHAR2(20 BYTE)  NOT NULL,
    DISCOUNT NUMBER(*,2) NOT NULL,

    CONSTRAINT MEMBER_PK PRIMARY KEY (VIPLEVEL)
)

create TABLE CUSTOMER (
    CUS_ID  VARCHAR2(20 BYTE)  NOT NULL,
    PHONE_NUM VARCHAR2(20 BYTE)  NOT NULL,
    FOUND_DATE DATE  NOT NULL,
    BIRTHDAY DATE NOT NULL,
    GENDER VARCHAR2(10 BYTE)  NOT NULL,
    NAME VARCHAR2(100 BYTE)  NOT NULL,
    EX INTEGER NOT NULL,
    PASSWORD VARCHAR2(20 BYTE)  NOT NULL,
    BALANCE NUMBER(*,2)  NOT NULL,
    VIPLEVEL  VARCHAR2(20 BYTE)  NOT NULL,

    CONSTRAINT CUSTOMER_PK PRIMARY KEY (CUS_ID),
    CONSTRAINT CUSTOMER_MEMBER_VIPLEVEL_FK FOREIGN KEY (VIPLEVEL)
        REFERENCES MEMBER (VIPLEVEL)
)

create TABLE BILL (
    BILL_ID  VARCHAR2(20 BYTE)  NOT NULL,
    CUS_ID   VARCHAR2(20 BYTE)  NOT NULL,
    SER_ID   VARCHAR2(20 BYTE)  NOT NULL,
    COU_ID   VARCHAR2(20 BYTE)  NOT NULL,
    SOURSE   VARCHAR2(100 BYTE)  NOT NULL,
    FOUND_DATA  DATA  NOT NULL,
    PAID_AMOUNT NUMBER(*,2) NOT NULL CHECK (PAID_AMOUNT >= 0),
    REFUND_AMOUNT NUMBER(*,2) NOT NULL CHECK (PAID_AMOUNT >= 0),
    PAY_STATE  VARCHAR2(20 BYTE)  NOT NULL,
    EXE_STATE  VARCHAR2(20 BYTE)  NOT NULL,

    CONSTRAINT BILL_PK PRIMARY KEY (BILL_ID),
    CONSTRAINT BILL_COUPON_COU_ID_FK FOREIGN KEY (COU_ID)
        REFERENCES COUPON (COU_ID),
    CONSTRAINT BILL_CUSTOMER_CUS_ID_FK FOREIGN KEY (CUS_ID)
        REFERENCES CUSTOMER (CUS_ID),
    CONSTRAINT BILL_SERVER_SER_ID_FK FOREIGN KEY (SER_ID)
        REFERENCES SERVER (SER_ID)
)

create TABLE INCLUDE (
    BILL_ID  VARCHAR2(20 BYTE)  NOT NULL,
    PROJ_ID  VARCHAR2(20 BYTE)  NOT NULL,

    CONSTRAINT BILL_PROJECT_BILL_ID_FK_R FOREIGN KEY (BILL_ID)
        REFERENCES BILL (BILL_ID),
    CONSTRAINT BILL_PROJECT_PROJ_ID_FK_R FOREIGN KEY (PROJ_ID)
        REFERENCES PROJECT (PROJ_ID)
)

create TABLE CUS_COU (
    CUS_ID  VARCHAR2(20 BYTE)  NOT NULL,
    COU_ID  VARCHAR2(20 BYTE)  NOT NULL,

    CONSTRAINT CUSTOMER_COUPON_CUS_ID_FK_R FOREIGN KEY (CUS_ID)
        REFERENCES CUSTOMER (CUS_ID),
    CONSTRAINT CUSTOMER_COUPON_COU_ID_FK_R FOREIGN KEY (COU_ID)
        REFERENCES COUPON (COU_ID)
)

create TABLE WORK_TIME (
    SER_ID  VARCHAR2(20 BYTE)  NOT NULL,
    TIME_ID  VARCHAR2(20 BYTE)  NOT NULL,
    WORKING_TIME TIMESTAMP(6) NOT NULL,
    CLOSING_TIME TIMESTAMP(6) NOT NULL,
    DAY DATE NOT NULL,

    CONSTRAINT WORK_TIME_PK PRIMARY KEY(TIME_ID),
    CONSTRAINT WORK_TIME_SERVER_SER_ID_FK FOREIGN KEY (SER_ID)
        REFERENCES SERVER (SER_ID)
)

create TABLE INVENTORY (
    W_ID  VARCHAR2(20 BYTE)  NOT NULL,
    STORAGE NUMBER NOT NULL,
    PRODUCER  VARCHAR2(100 BYTE)  NOT NULL,
    PRICE NUMBER(*,2) NOT NULL check(PRICE >= 0),
    HOS_ID  VARCHAR2(20 BYTE)  NOT NULL,

    CONSTRAINT INVENTORY_PK PRIMARY KEY (W_ID),
    CONSTRAINT INVENTORY_HOS_HOS_ID_FK FOREIGN KEY (HOS_ID)
        REFERENCES HOSPITAL (HOS_ID)
)

create TABLE GOODS (
    G_ID  VARCHAR2(20 BYTE)  NOT NULL,
    NAME  VARCHAR2(100 BYTE)  NOT NULL,
    SELL_BY_DATE DATE NOT NULL,
    W_ID  VARCHAR2(20 BYTE)  NOT NULL,

    CONSTRAINT GOODS_PK PRIMARY KEY (G_ID),
    CONSTRAINT GOODS_INVENTORY_W_ID_FK FOREIGN KEY (W_ID)
        REFERENCES INVENTORY (W_ID)
)